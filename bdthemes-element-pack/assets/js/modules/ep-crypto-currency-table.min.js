!function(e,r){"use strict";var t=function(e,r){var t=e.find(".bdt-crypto-currency-table"),n=t.data("settings"),i=Boolean(elementorFrontend.isEditMode());if(!t.length)return;var a={currency:n.currency,limit:100,order:"market_cap_desc"};n.currency&&(a.currency=n.currency),n.limit&&(a.limit=n.limit),n.order&&(a.order=n.order);let d,c,o=a;function s(e){return e>999&&e<1e6?(e/1e3).toFixed(2)+"K":e>1e9?(e/1e9).toFixed(2)+"B":e>1e6?(e/1e6).toFixed(2)+"M":e<900?e:void 0}c=void 0!==o&&void 0!==o.currency?o.currency:"usd",d=r(n.tableId).DataTable({processing:!0,serverSide:!1,searching:n.searching,ordering:n.ordering,paging:n.paging,info:n.info,pageLength:n.pageLength,ajax:{type:"GET",dataType:"json",url:ElementPackConfig.ajaxurl+"?action=ep_crypto",data:{currency:c,per_page:o.limit,order:o.order,ids:n.ids}},columns:[{data:"market_cap_rank"},{data:"id",render:function(e,r,t,n){return'<div class="bdt-coin"><div class="bdt-coin-image"><img src="'+t.image+'" alt="'+t.id+'"></div><div class="bdt-coin-title"><div class="bdt-coin-name">'+t.id+'</div><div class="bdt-coin-symbol">'+t.symbol+"</div></div></div>"}},{data:"current_price",render:function(e,r,t,n){let i=c.toString().toUpperCase(),a=Number(e)===e&&e%1!=0?e.toFixed(2):e;return returnCurrencySymbol(i)+a}},{data:"price_change_percentage_1h",render:function(e,r,t,n){return Number(e)===e&&e%1!=0?e.toFixed(2)+"%":e+"%"}},{data:"price_change_percentage_24h",render:function(e,r,t,n){return Number(e)===e&&e%1!=0?e.toFixed(2)+"%":e+"%"}},{data:"price_change_percentage_7d",render:function(e,r,t,n){return Number(e)===e&&e%1!=0?e.toFixed(2)+"%":e+"%"}},{data:"market_cap",render:function(e,r,t,n){let i=c.toString().toUpperCase(),a=s(e);return returnCurrencySymbol(i)+a}},{data:"total_volume",render:function(e,r,t,n){let i=c.toString().toUpperCase(),a=s(e);return returnCurrencySymbol(i)+a}},{data:"circulating_supply",render:function(e,r,t,n){return s(e)}},{data:"last_seven_days_changes",render:function(e,r,t,n){return'<input type="hidden" class="hdnInputCanvas-'+t.id+'"  value="'+e+'"/><div class="chart-container" style="position: relative; height:150px; width:50px"><canvas id="canvas-'+t.id+'"></canvas></div>'}}],columnDefs:[{searchable:!1,orderable:!1,targets:[9]}],order:[[0,"asc"]],createdRow:function(e,t,n){let i=r("td",e).eq(9),a=r(i).find("input").val().split(",");a&&a.length>15&&(a=a.slice(0,14));const d=r(i).find("canvas"),c=[],o=[];a.forEach((e,r)=>{c.push(r),o.push(Number(e))});const s=new Chart(d,{type:"line",data:{labels:c,datasets:[{label:"",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:o}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}},y:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}}}}});s.canvas.parentNode.style.width="150px",s.canvas.parentNode.style.height="50px"}}),!0!==i&&setTimeout((function(){!function e(){r.ajax({type:"GET",url:ElementPackConfig.ajaxurl+"?action=ep_crypto_data",data:{currency:c,per_page:o.limit,order:o.order,ids:n.ids}}).done((function(t){var n=d.rows().data();let i=[];for(let e=0;e<n.length;e++)i.push({id:n[e].id,current_price:n[e].current_price});let a=JSON.parse(t),c=[];for(let e=0;e<i.length;e++)r.map(a,(function(r,t){r.id===i[e].id&&r.current_price!==i[e].current_price&&c.push({id:i[e].id,current_price:r.current_price,old_price:i[e].current_price})}));c.filter((function(e,t){let n=0;d.column(1).data().filter((function(t,i){return t===e.id&&(n=i,d.column(2).nodes().each((function(t,n,a){if(n===i){d.cell(t).data(e.current_price);let n=d.column(2).nodes();r(n[i]).addClass("focus-item")}}))),t===e.id}))})),setTimeout((function(){return d.column(2).nodes().each((function(){r(this).removeClass("focus-item")})),e()}),1e4)}))}()}),5e3)};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-crypto-currency-table.default",t)}))}(jQuery,window.elementorFrontend);